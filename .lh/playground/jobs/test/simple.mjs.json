{
    "sourceFile": "playground/jobs/test/simple.mjs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1758049591937,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1758049591937,
            "name": "Commit-0",
            "content": "import { defineJob } from \"gitvan/define\";\nimport { useGit } from \"gitvan/useGit\";\nimport { promises as fs } from \"node:fs\";\nimport { join } from \"pathe\";\n\nexport default defineJob({\n  meta: {\n    desc: \"Generate a simple status report\",\n    tags: [\"report\", \"status\"],\n  },\n  async run({ ctx, payload }) {\n    const git = useGit();\n\n    // Gather repository information\n    const head = await git.head();\n    const branch = await git.getCurrentBranch();\n    const isClean = await git.isClean();\n    const commitCount = await git.getCommitCount();\n\n    const reportData = {\n      timestamp: ctx.nowISO,\n      repository: {\n        head: head.substring(0, 8),\n        branch,\n        isClean,\n        commitCount,\n      },\n      payload: payload || {},\n      environment: {\n        nodeVersion: process.version,\n        platform: process.platform,\n      },\n    };\n\n    // Create JSON report\n    const outputPath = join(ctx.root, \"dist\", \"status-report.json\");\n    await fs.mkdir(join(ctx.root, \"dist\"), { recursive: true });\n    await fs.writeFile(outputPath, JSON.stringify(reportData, null, 2));\n\n    return {\n      ok: true,\n      artifacts: [outputPath],\n      data: reportData,\n    };\n  },\n});\n"
        }
    ]
}